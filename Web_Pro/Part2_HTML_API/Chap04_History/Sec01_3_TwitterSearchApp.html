<!DOCTYPE html>
<html>
	<head>
		<title>트위터 검색 애플리케이션</title>
		<meta charset='utf-8' />
		<link rel="stylesheet" href="bootstrap.css" />
		<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="sammy.js"></script>
		<script>
			// 페이지 라우트
			var app = Sammy(function() {
				this.get('#/', function() {
					$('#content').empty();
				});
				this.get('#/search', function() {
					// 입력 양식의 내용을 제거합니다.
					$('input[type="text"]').val('');
					
					// 변수를 선언합니다.
					var keyword = this.params['keyword'];
					
					// Ajax 요청을 수행합니다.
					$.ajax('http://me2day.net/api/get_posts/' + keyword + '.json?callback=?', {
						dataType: 'JSONP',
						success: function(data) {
							// 화면에서 기존 데이터를 제거합니다.
							$('#content').empty();
							
							// 요소를 생성합니다.
							data.results.forEach(function(item) {
								var output = '';
								output += '<h4>' + item.from_user + '</h4>';
								output += '<p>' + item.text + '</p>';
								output += '<hr />';
								
								$('#content').append(output);
							});
						}
					});
				});
			});
			
			// 애플리케이션 실행
			$(document).ready(function() {
				app.run('#/');
			});
		</script>
	</head>
	<body class="container">
		<header>
			<h1>Twitter Search</h1>
			<form action="#/search" method="get" class="form-inline">
				<input name="keyword" type="text" />
				<input type="submit" value="Search" class="btn" />
			</form>
		</header>
		<hr />
		<section id="content">
			
		</section>
	</body>
</html>
